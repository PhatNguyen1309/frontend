{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{allOrders,clearErrors}from'../../actions/orderActions';import{DELETE_ORDER_RESET}from'../../constants/orderConstants';var OrdersList=function OrdersList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.allOrders;}),loading=_useSelector.loading,error=_useSelector.error,orders=_useSelector.orders;var _useSelector2=useSelector(function(state){return state.order;}),isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(allOrders());if(error){alert.error(error);dispatch(clearErrors());}if(isDeleted){alert.success('Xóa hóa đơn thành công');history.push('/admin/orders');dispatch({type:DELETE_ORDER_RESET});}},[dispatch,alert,error,isDeleted,history]);var setOrders=function setOrders(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Số mặt hàng',field:'numofItems',sort:'asc'},{label:'Tổng tiền',field:'amount',sort:'asc'},{label:'Ngày tạo hóa đơn',field:'createdAt',sort:'asc'},{label:'Trạng thái',field:'status',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};orders.forEach(function(order){data.rows.push({id:order._id,numofItems:order.orderItems.length,amount:\"\".concat(order.totalPrice,\" VN\\u0110\"),createdAt:order.createdAt,status:order.orderStatus&&String(order.orderStatus).includes('Đã giao hàng')?/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:order.orderStatus}):/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:order.orderStatus}),actions:/*#__PURE__*/_jsxs(Fragment,{children:[\"\\u2003\\u2003\\u2003\\u2003\",/*#__PURE__*/_jsx(Link,{to:\"/admin/order/\".concat(order._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-eye\"})})]})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Orders'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"T\\u1EA5t c\\u1EA3 \\u0111\\u01A1n h\\xE0ng\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setOrders(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default OrdersList;","map":{"version":3,"sources":["C:/Users/This PC/Downloads/Nhom3_IVS_ThucTapChuyenNganh-master/Nhom3_IVS_ThucTapChuyenNganh-master/frontend/src/components/admin/OrdersList.js"],"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","allOrders","clearErrors","DELETE_ORDER_RESET","OrdersList","history","alert","dispatch","state","loading","error","orders","order","isDeleted","success","push","type","setOrders","data","columns","label","field","sort","rows","forEach","id","_id","numofItems","orderItems","length","amount","totalPrice","createdAt","status","orderStatus","String","includes","color","actions"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTable } from 'mdbreact'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\nimport Sidebar from './Sidebar'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { allOrders, clearErrors } from '../../actions/orderActions'\nimport { DELETE_ORDER_RESET } from '../../constants/orderConstants'\n\nconst OrdersList = ({ history }) => {\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, orders } = useSelector(state => state.allOrders);\n    const { isDeleted } = useSelector(state => state.order)\n\n    useEffect(() => {\n        dispatch(allOrders());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (isDeleted) {\n            alert.success('Xóa hóa đơn thành công');\n            history.push('/admin/orders');\n            dispatch({ type: DELETE_ORDER_RESET })\n        }\n\n    }, [dispatch, alert, error, isDeleted, history])\n\n\n\n    const setOrders = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Số mặt hàng',\n                    field: 'numofItems',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Tổng tiền',\n                    field: 'amount',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Ngày tạo hóa đơn',\n                    field: 'createdAt',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Trạng thái',\n                    field: 'status',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Hành động',\n                    field: 'actions',\n                },\n            ],\n            rows: []\n        }\n\n        orders.forEach(order => {\n            data.rows.push({\n                id: order._id,\n                numofItems: order.orderItems.length,\n                amount: `${order.totalPrice} VNĐ`,\n                createdAt: order.createdAt,\n                status: order.orderStatus && String(order.orderStatus).includes('Đã giao hàng')\n                    ? <p style={{ color: 'green' }}>{order.orderStatus}</p>\n                    : <p style={{ color: 'red' }}>{order.orderStatus}</p>,\n                actions: <Fragment>\n                    &emsp;&emsp;&emsp;&emsp;\n                    <Link to={`/admin/order/${order._id}`} className=\"btn btn-primary py-1 px-2\">\n                        <i className=\"fa fa-eye\"></i>\n                    </Link>\n\n                </Fragment>\n            })\n        })\n\n        return data;\n    }\n\n\n    return (\n        <Fragment>\n            <MetaData title={'All Orders'} />\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <Fragment>\n                        <h1 className=\"my-5\">Tất cả đơn hàng</h1>\n\n                        {loading ? <Loader /> : (\n                            <MDBDataTable\n                                data={setOrders()}\n                                className=\"px-3\"\n                                bordered\n                                striped\n                                hover\n                            />\n                        )}\n\n                    </Fragment>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default OrdersList\n"]},"metadata":{},"sourceType":"module"}