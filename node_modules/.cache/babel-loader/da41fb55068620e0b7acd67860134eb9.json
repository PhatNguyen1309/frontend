{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\This PC\\\\OneDrive\\\\Desktop\\\\doan\\\\doan\\\\doan_tiemPizza\\\\frontend\\\\src\\\\components\\\\product\\\\ProductDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport { Carousel } from 'react-bootstrap';\nimport Loader from '../layout/Loader';\nimport MetaData from '../layout/MetaData';\nimport ListReviews from '../review/ListReviews';\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProductDetails, newReview, clearErrors } from '../../actions/productActions';\nimport { addItemToCart } from '../../actions/cartActions';\nimport { NEW_REVIEW_RESET } from '../../constants/productConstants';\n\nconst ProductDetails = ({\n  match\n}) => {\n  _s();\n\n  const [quantity, setQuantity] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const [crust, setCrust] = useState(''); // Đế mặc định là trống\n\n  const [size, setSize] = useState(''); // Kích thước mặc định là trống\n\n  const dispatch = useDispatch();\n  const alert = useAlert();\n  const {\n    loading,\n    error,\n    product\n  } = useSelector(state => state.productDetails);\n  const {\n    user\n  } = useSelector(state => state.auth);\n  const {\n    error: reviewError,\n    success\n  } = useSelector(state => state.newReview);\n  useEffect(() => {\n    dispatch(getProductDetails(match.params.id));\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (reviewError) {\n      alert.error(reviewError);\n      dispatch(clearErrors());\n    }\n\n    if (success) {\n      alert.success('Đánh giá thành công');\n      dispatch({\n        type: NEW_REVIEW_RESET\n      });\n    }\n  }, [dispatch, alert, error, reviewError, match.params.id, success]);\n\n  const addToCart = () => {\n    if (!size) {\n      alert.error(\"Vui lòng chọn kích thước.\");\n      return;\n    }\n\n    const price = getFormattedPrice(); // Lấy giá đã được định dạng\n\n    dispatch(addItemToCart(match.params.id, quantity, size, price)); // Truyền giá vào đây\n\n    alert.success('Đã thêm vào giỏ hàng');\n  };\n\n  const increaseQty = () => {\n    setQuantity(prevQuantity => {\n      const newQty = Math.min(prevQuantity + 1, product.stock);\n      return newQty;\n    });\n  };\n\n  const decreaseQty = () => {\n    setQuantity(prevQuantity => {\n      const newQty = Math.max(prevQuantity - 1, 1);\n      return newQty;\n    });\n  };\n\n  function setUserRatings() {\n    const stars = document.querySelectorAll('.star');\n    stars.forEach((star, index) => {\n      star.starValue = index + 1;\n      ['click', 'mouseover', 'mouseout'].forEach(function (e) {\n        star.addEventListener(e, showRatings);\n      });\n    });\n\n    function showRatings(e) {\n      stars.forEach((star, index) => {\n        if (e.type === 'click') {\n          if (index < this.starValue) {\n            star.classList.add('orange');\n            setRating(this.starValue);\n          } else {\n            star.classList.remove('orange');\n          }\n        }\n\n        if (e.type === 'mouseover') {\n          if (index < this.starValue) {\n            star.classList.add('yellow');\n          } else {\n            star.classList.remove('yellow');\n          }\n        }\n\n        if (e.type === 'mouseout') {\n          star.classList.remove('yellow');\n        }\n      });\n    }\n  }\n\n  const reviewHandler = () => {\n    const formData = new FormData();\n    formData.set('rating', rating);\n    formData.set('comment', comment);\n    formData.set('productId', match.params.id);\n    dispatch(newReview(formData));\n  }; // Tính toán giá theo kích thước\n\n\n  const getFormattedPrice = () => {\n    const basePrice = product.price || 0;\n\n    if (size === \"12 inch\") {\n      return (basePrice * 1.3).toLocaleString(); // Tăng giá lên 30% nếu chọn 12 inch\n    }\n\n    return basePrice.toLocaleString();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 24\n    }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(MetaData, {\n        title: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row d-flex justify-content-around\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-5 img-fluid\",\n          id: \"product_image\",\n          children: /*#__PURE__*/_jsxDEV(Carousel, {\n            pause: \"hover\",\n            children: product.images && product.images.map(image => /*#__PURE__*/_jsxDEV(Carousel.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"d-block w-100\",\n                src: image.url,\n                alt: product.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 41\n              }, this)\n            }, image.public_id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-5 mt-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rating-outer\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              id: \"no_of_reviews\",\n              children: product.ratings\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating-inner\",\n              style: {\n                width: `${product.ratings / 5 * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"no_of_reviews\",\n            children: [\"(\", product.numOfReviews, \" \\u0111\\xE1nh gi\\xE1)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"product_price\",\n            children: [getFormattedPrice(), \"\\u0111\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stockCounter d-inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn btn-danger minus\",\n              onClick: decreaseQty,\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"form-control count d-inline\",\n              value: quantity,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn btn-primary plus\",\n              onClick: increaseQty,\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sizeSelector mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"K\\xEDch th\\u01B0\\u1EDBc:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-check\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: \"size9\",\n                name: \"size\",\n                value: \"9 inch\",\n                checked: size === \"9 inch\",\n                onChange: e => setSize(e.target.value),\n                className: \"form-check-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"size9\",\n                className: \"form-check-label\",\n                children: \"9 inch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-check\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: \"size12\",\n                name: \"size\",\n                value: \"12 inch\",\n                checked: size === \"12 inch\",\n                onChange: e => setSize(e.target.value),\n                className: \"form-check-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"size12\",\n                className: \"form-check-label\",\n                children: \"12 inch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"crustSelector mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Ch\\u1ECDn \\u0111\\u1EBF:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-check\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: \"thinCrust\",\n                name: \"crust\",\n                value: \"M\\u1ECFng\",\n                checked: crust === \"Mỏng\",\n                onChange: e => setCrust(e.target.value),\n                className: \"form-check-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"thinCrust\",\n                className: \"form-check-label\",\n                children: \"M\\u1ECFng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-check\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: \"thickCrust\",\n                name: \"crust\",\n                value: \"D\\xE0y\",\n                checked: crust === \"Dày\",\n                onChange: e => setCrust(e.target.value),\n                className: \"form-check-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"thickCrust\",\n                className: \"form-check-label\",\n                children: \"D\\xE0y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            id: \"cart_btn\",\n            className: `btn btn-primary d-inline ml-4 ${product.stock <= 1 ? 'disabled-button' : ''}`,\n            disabled: product.stock <= 1,\n            onClick: addToCart,\n            children: \"Th\\xEAm v\\xE0o gi\\u1ECF h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"T\\xECnh tr\\u1EA1ng h\\xE0ng: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              id: \"stock_status\",\n              className: product.stock > 1 ? 'greenColor' : 'redColor',\n              children: product.stock > 1 ? 'Còn hàng' : 'Hết hàng'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 49\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mt-2\",\n            children: \"M\\xF4 t\\u1EA3:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"product_seller mb-3\",\n            children: [\"Xu\\u1EA5t x\\u1EE9: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: product.seller\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 66\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 29\n          }, this), user ? /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"review_btn\",\n            type: \"button\",\n            className: \"btn btn-primary mt-4\",\n            \"data-toggle\": \"modal\",\n            \"data-target\": \"#ratingModal\",\n            onClick: setUserRatings,\n            children: \"B\\xECnh lu\\u1EADn s\\u1EA3n ph\\u1EA9m\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger mt-5\",\n            type: \"alert\",\n            children: \"B\\u1EA1n c\\u1EA7n \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 c\\xF3 th\\u1EC3 \\u0111\\xE1nh gi\\xE1 \\u0111\\u01B0\\u1EE3c s\\u1EA3n ph\\u1EA9m n\\xE0y.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mt-2 mb-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating w-50\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal fade\",\n                id: \"ratingModal\",\n                tabIndex: \"-1\",\n                role: \"dialog\",\n                \"aria-labelledby\": \"ratingModalLabel\",\n                \"aria-hidden\": \"true\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-dialog\",\n                  role: \"document\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"modal-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-header\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                        className: \"modal-title\",\n                        id: \"ratingModalLabel\",\n                        children: \"\\u0110\\xE1nh gi\\xE1 s\\u1EA3n ph\\u1EA9m\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 254,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"close\",\n                        \"data-dismiss\": \"modal\",\n                        \"aria-label\": \"Close\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          \"aria-hidden\": \"true\",\n                          children: \"\\xD7\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 256,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 255,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-body\",\n                      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                        className: \"stars\",\n                        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                          className: \"star\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 262,\n                            columnNumber: 78\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 262,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          className: \"star\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 263,\n                            columnNumber: 78\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 263,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          className: \"star\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 264,\n                            columnNumber: 78\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 264,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          className: \"star\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 265,\n                            columnNumber: 78\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 265,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          className: \"star\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 266,\n                            columnNumber: 78\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 266,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                        className: \"form-control mt-3\",\n                        value: comment,\n                        onChange: e => setComment(e.target.value)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 269,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-footer\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"btn btn-secondary\",\n                        \"data-dismiss\": \"modal\",\n                        children: \"\\u0110\\xF3ng\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 278,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"btn btn-primary\",\n                        onClick: reviewHandler,\n                        children: \"G\\u1EEDi \\u0111\\xE1nh gi\\xE1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 279,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 29\n          }, this), product.reviews && product.reviews.length > 0 && /*#__PURE__*/_jsxDEV(ListReviews, {\n            reviews: product.reviews\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProductDetails, \"MAC4x54OeHJPpFvfxxACsidgwbg=\", false, function () {\n  return [useDispatch, useAlert, useSelector, useSelector, useSelector];\n});\n\n_c = ProductDetails;\nexport default ProductDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetails\");","map":{"version":3,"sources":["C:/Users/This PC/OneDrive/Desktop/doan/doan/doan_tiemPizza/frontend/src/components/product/ProductDetails.js"],"names":["React","Fragment","useState","useEffect","Carousel","Loader","MetaData","ListReviews","useAlert","useDispatch","useSelector","getProductDetails","newReview","clearErrors","addItemToCart","NEW_REVIEW_RESET","ProductDetails","match","quantity","setQuantity","rating","setRating","comment","setComment","crust","setCrust","size","setSize","dispatch","alert","loading","error","product","state","productDetails","user","auth","reviewError","success","params","id","type","addToCart","price","getFormattedPrice","increaseQty","prevQuantity","newQty","Math","min","stock","decreaseQty","max","setUserRatings","stars","document","querySelectorAll","forEach","star","index","starValue","e","addEventListener","showRatings","classList","add","remove","reviewHandler","formData","FormData","set","basePrice","toLocaleString","name","images","map","image","url","title","public_id","ratings","width","numOfReviews","target","value","description","seller","reviews","length"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react';\nimport { Carousel } from 'react-bootstrap';\n\nimport Loader from '../layout/Loader';\nimport MetaData from '../layout/MetaData';\nimport ListReviews from '../review/ListReviews';\n\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProductDetails, newReview, clearErrors } from '../../actions/productActions';\nimport { addItemToCart } from '../../actions/cartActions';\nimport { NEW_REVIEW_RESET } from '../../constants/productConstants';\n\nconst ProductDetails = ({ match }) => {\n    const [quantity, setQuantity] = useState(1);\n    const [rating, setRating] = useState(0);\n    const [comment, setComment] = useState('');\n    const [crust, setCrust] = useState('');  // Đế mặc định là trống\n    const [size, setSize] = useState('');  // Kích thước mặc định là trống\n\n    const dispatch = useDispatch();\n    const alert = useAlert();\n\n    const { loading, error, product } = useSelector(state => state.productDetails);\n    const { user } = useSelector(state => state.auth);\n    const { error: reviewError, success } = useSelector(state => state.newReview);\n\n    useEffect(() => {\n        dispatch(getProductDetails(match.params.id));\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors());\n        }\n\n        if (reviewError) {\n            alert.error(reviewError);\n            dispatch(clearErrors());\n        }\n\n        if (success) {\n            alert.success('Đánh giá thành công');\n            dispatch({ type: NEW_REVIEW_RESET });\n        }\n    }, [dispatch, alert, error, reviewError, match.params.id, success]);\n\n    const addToCart = () => {\n        if (!size) {\n            alert.error(\"Vui lòng chọn kích thước.\");\n            return;\n        }\n    \n        const price = getFormattedPrice(); // Lấy giá đã được định dạng\n    \n        dispatch(addItemToCart(match.params.id, quantity, size, price)); // Truyền giá vào đây\n        alert.success('Đã thêm vào giỏ hàng');\n    };\n\n    const increaseQty = () => {\n        setQuantity(prevQuantity => {\n            const newQty = Math.min(prevQuantity + 1, product.stock);\n            return newQty;\n        });\n    };\n\n    const decreaseQty = () => {\n        setQuantity(prevQuantity => {\n            const newQty = Math.max(prevQuantity - 1, 1);\n            return newQty;\n        });\n    };\n\n    function setUserRatings() {\n        const stars = document.querySelectorAll('.star');\n\n        stars.forEach((star, index) => {\n            star.starValue = index + 1;\n\n            ['click', 'mouseover', 'mouseout'].forEach(function (e) {\n                star.addEventListener(e, showRatings);\n            });\n        });\n\n        function showRatings(e) {\n            stars.forEach((star, index) => {\n                if (e.type === 'click') {\n                    if (index < this.starValue) {\n                        star.classList.add('orange');\n                        setRating(this.starValue);\n                    } else {\n                        star.classList.remove('orange');\n                    }\n                }\n\n                if (e.type === 'mouseover') {\n                    if (index < this.starValue) {\n                        star.classList.add('yellow');\n                    } else {\n                        star.classList.remove('yellow');\n                    }\n                }\n\n                if (e.type === 'mouseout') {\n                    star.classList.remove('yellow');\n                }\n            });\n        }\n    }\n\n    const reviewHandler = () => {\n        const formData = new FormData();\n\n        formData.set('rating', rating);\n        formData.set('comment', comment);\n        formData.set('productId', match.params.id);\n\n        dispatch(newReview(formData));\n    };\n\n    // Tính toán giá theo kích thước\n    const getFormattedPrice = () => {\n        const basePrice = product.price || 0;\n        if (size === \"12 inch\") {\n            return (basePrice * 1.3).toLocaleString();  // Tăng giá lên 30% nếu chọn 12 inch\n        }\n        return basePrice.toLocaleString();\n    };\n\n    return (\n        <Fragment>\n            {loading ? <Loader /> : (\n                <Fragment>\n                    <MetaData title={product.name} />\n                    <div className=\"row d-flex justify-content-around\">\n                        <div className=\"col-12 col-lg-5 img-fluid\" id=\"product_image\">\n                            <Carousel pause='hover'>\n                                {product.images && product.images.map(image => (\n                                    <Carousel.Item key={image.public_id}>\n                                        <img className=\"d-block w-100\" src={image.url} alt={product.title} />\n                                    </Carousel.Item>\n                                ))}\n                            </Carousel>\n                        </div>\n\n                        <div className=\"col-12 col-lg-5 mt-5\">\n                            <h3>{product.name}</h3>\n                            <hr />\n\n                            <div className=\"rating-outer\">\n                                <span id=\"no_of_reviews\">{product.ratings}</span>\n                                <div className=\"rating-inner\" style={{ width: `${(product.ratings / 5) * 100}%` }}></div>\n                            </div>\n                            <span id=\"no_of_reviews\">({product.numOfReviews} đánh giá)</span>\n\n                            <hr />\n                            <p id=\"product_price\">{getFormattedPrice()}đ</p>\n                            <div className=\"stockCounter d-inline\">\n                                <span className=\"btn btn-danger minus\" onClick={decreaseQty}>-</span>\n\n                                <input type=\"number\" className=\"form-control count d-inline\" value={quantity} readOnly />\n\n                                <span className=\"btn btn-primary plus\" onClick={increaseQty}>+</span>\n                            </div>\n                            <div className=\"sizeSelector mt-3\">\n                                <label>Kích thước:</label>\n                                <div className=\"form-check\">\n                                    <input\n                                        type=\"radio\"\n                                        id=\"size9\"\n                                        name=\"size\"\n                                        value=\"9 inch\"\n                                        checked={size === \"9 inch\"}\n                                        onChange={(e) => setSize(e.target.value)}\n                                        className=\"form-check-input\"\n                                    />\n                                    <label htmlFor=\"size9\" className=\"form-check-label\">9 inch</label>\n                                </div>\n                                <div className=\"form-check\">\n                                    <input\n                                        type=\"radio\"\n                                        id=\"size12\"\n                                        name=\"size\"\n                                        value=\"12 inch\"\n                                        checked={size === \"12 inch\"}\n                                        onChange={(e) => setSize(e.target.value)}\n                                        className=\"form-check-input\"\n                                    />\n                                    <label htmlFor=\"size12\" className=\"form-check-label\">12 inch</label>\n                                </div>\n                            </div>\n                            <div className=\"crustSelector mt-3\">\n                                <label>Chọn đế:</label>\n                                <div className=\"form-check\">\n                                    <input\n                                        type=\"radio\"\n                                        id=\"thinCrust\"\n                                        name=\"crust\"\n                                        value=\"Mỏng\"\n                                        checked={crust === \"Mỏng\"}\n                                        onChange={(e) => setCrust(e.target.value)}\n                                        className=\"form-check-input\"\n                                    />\n                                    <label htmlFor=\"thinCrust\" className=\"form-check-label\">Mỏng</label>\n                                </div>\n                                <div className=\"form-check\">\n                                    <input\n                                        type=\"radio\"\n                                        id=\"thickCrust\"\n                                        name=\"crust\"\n                                        value=\"Dày\"\n                                        checked={crust === \"Dày\"}\n                                        onChange={(e) => setCrust(e.target.value)}\n                                        className=\"form-check-input\"\n                                    />\n                                    <label htmlFor=\"thickCrust\" className=\"form-check-label\">Dày</label>\n                                </div>\n                            </div>\n                            \n                            <button\n                                type=\"button\"\n                                id=\"cart_btn\"\n                                className={`btn btn-primary d-inline ml-4 ${product.stock <= 1 ? 'disabled-button' : ''}`}\n                                disabled={product.stock <= 1}\n                                onClick={addToCart}\n                            >\n                                Thêm vào giỏ hàng\n                            </button>\n\n                            <hr />\n\n                            <p>Tình trạng hàng: <span id=\"stock_status\" className={product.stock > 1 ? 'greenColor' : 'redColor'} >{product.stock > 1 ? 'Còn hàng' : 'Hết hàng'}</span></p>\n\n                            <hr />\n\n                            <h4 className=\"mt-2\">Mô tả:</h4>\n                            <p>{product.description}</p>\n                            <hr />\n                            <p id=\"product_seller mb-3\">Xuất xứ: <strong>{product.seller}</strong></p>\n\n                            {user ? <button id=\"review_btn\" type=\"button\" className=\"btn btn-primary mt-4\" data-toggle=\"modal\" data-target=\"#ratingModal\" onClick={setUserRatings}>\n                                Bình luận sản phẩm\n                            </button>\n                                :\n                                <div className=\"alert alert-danger mt-5\" type='alert'>Bạn cần đăng nhập để có thể đánh giá được sản phẩm này.</div>\n                            }\n\n                            <div className=\"row mt-2 mb-5\">\n                                <div className=\"rating w-50\">\n\n                                    <div className=\"modal fade\" id=\"ratingModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"ratingModalLabel\" aria-hidden=\"true\">\n                                        <div className=\"modal-dialog\" role=\"document\">\n                                            <div className=\"modal-content\">\n                                                <div className=\"modal-header\">\n                                                    <h5 className=\"modal-title\" id=\"ratingModalLabel\">Đánh giá sản phẩm</h5>\n                                                    <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                                        <span aria-hidden=\"true\">&times;</span>\n                                                    </button>\n                                                </div>\n                                                <div className=\"modal-body\">\n\n                                                    <ul className=\"stars\" >\n                                                        <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                        <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                        <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                        <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                        <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                    </ul>\n\n                                                    <textarea\n                                                        className=\"form-control mt-3\"\n                                                        value={comment}\n                                                        onChange={(e) => setComment(e.target.value)}\n                                                    >\n                                                    </textarea>\n\n                                                </div>\n                                                <div className=\"modal-footer\">\n                                                    <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Đóng</button>\n                                                    <button type=\"button\" className=\"btn btn-primary\" onClick={reviewHandler}>Gửi đánh giá</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {product.reviews && product.reviews.length > 0 && (\n                                <ListReviews reviews={product.reviews} />\n                            )}\n\n                        </div>\n                    </div>\n                </Fragment>\n            )}\n        </Fragment>\n    );\n};\n\nexport default ProductDetails;"]},"metadata":{},"sourceType":"module"}